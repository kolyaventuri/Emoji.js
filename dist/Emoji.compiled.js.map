{"version":3,"sources":["../src/Emoji.js"],"names":["bind","document","readyState","goReplace","addEventListener","emojis","querySelectorAll","window","emojiClass","join","fallback","emoji","original","innerHTML","converted","emojione","toImage","outerHTML","parser","DOMParser","parseFromString","ex","htmlData","image","querySelector","rexp","RegExp","title","object","createElement","style","backgroundColor","backgroundImage","src","backgroundSize","display","setAttribute","getAttribute","replace","el","rel","type","href","head","appendChild","s","async","onreadystatechange","onload","test"],"mappings":"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","file":"Emoji.compiled.js","sourcesContent":["/*\r\n* Parses EmojiOne codes on page load.\r\n*\r\n* <element class=\"emoji\">:code</element> will be turned into a corresponding\r\n* Emoji in the style of EmojiOne (http://emojione.com/). Non-draggable on browsers\r\n* that will support it.\r\n*\r\n* Class names can be overridden using a global array. Ex:\r\n*     window.emojiClass = ['.emoji', '.icon'];\r\n*\r\n*/\r\n\r\nconst bind = () => {\r\n  if(document.readyState === 'complete') {\r\n    goReplace();\r\n  } else {\r\n    document.addEventListener('DOMContentLoaded', goReplace);\r\n  }\r\n};\r\n\r\nconst goReplace = () => {\r\n  let emojis = document.querySelectorAll(window.emojiClass ? window.emojiClass.join(',') : '.emoji');\r\n  let fallback = () => {\r\n    for(let emoji of emojis) {\r\n      let original = emoji.innerHTML;\r\n      let converted = emojione.toImage(original);\r\n      emoji.outerHTML = converted;\r\n    }\r\n  };\r\n  if('DOMParser' in window) {\r\n    let parser = new DOMParser();\r\n    try {\r\n      if ((new DOMParser()).parseFromString(\"\", \"text/html\")) {\r\n\r\n      }\r\n    } catch (ex) {fallback();}\r\n\r\n    for(let emoji of emojis) {\r\n      let original = emoji.innerHTML;\r\n      let converted = emojione.toImage(original);\r\n      let htmlData = parser.parseFromString(converted, \"text/html\");\r\n      let image = htmlData.querySelector('img.emojione');\r\n      let rexp = new RegExp(image.title, 'g');\r\n      let object = document.createElement('i');\r\n      object.style.backgroundColor = 'rgba(0,0,0,0)';\r\n      object.style.backgroundImage = 'url(' + image.src + ')';\r\n      object.style.backgroundSize = 'cover';\r\n      object.style.display = \"inline-block\";\r\n      object.setAttribute('class', image.getAttribute('class'));\r\n      emoji.outerHTML = emoji.outerHTML.replace(rexp, object.outerHTML);\r\n    }\r\n  } else {\r\n    fallback();\r\n  }\r\n};\r\n\r\nif('emojione' in window) {\r\n  bind();\r\n} else {\r\n  let el = document.createElement('link');\r\n  el.rel = \"stylesheet\";\r\n  el.type = \"text/css\";\r\n  el.href = 'https://cdn.jsdelivr.net/emojione/2.2.7/assets/css/emojione.min.css';\r\n  document.head.appendChild(el);\r\n\r\n  let s = document.createElement('script');\r\n  s.src = 'https://cdn.jsdelivr.net/emojione/2.2.7/lib/js/emojione.min.js';\r\n  s.async = true;\r\n  s.onreadystatechange = s.onload = () => {\r\n    if ((!s.readyState || /loaded|complete/.test(s.readyState))) {\r\n      goReplace();\r\n    }\r\n  };\r\n  document.querySelector('head').appendChild(s);\r\n}\r\n"]}